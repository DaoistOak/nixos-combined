# Gemini Context: NixOS and Home-Manager Configuration

This directory contains a complete NixOS and home-manager configuration managed using Nix Flakes. The setup is for a machine with the hostname "Overlord" and a user "zeph".

## Project Overview

*   **Purpose:** To declaratively manage the system configuration of a NixOS machine and the user environment of its primary user.
*   **Technologies:**
    *   **Nix:** The purely functional package manager and language used to define the configuration.
    *   **NixOS:** The Linux distribution built on top of Nix.
    *   **Home-Manager:** A tool to manage a user's dotfiles and environment in a declarative way.
    *   **Nix Flakes:** A feature of Nix that provides a standard way to manage dependencies and package Nix projects.
*   **Architecture:** The configuration is modular, with different aspects of the system and user environment separated into different files.
    *   `flake.nix`: The main entry point, defining all dependencies (inputs) and the final configurations (outputs).
    *   `nixos/`: This directory contains the system-level configuration.
        *   `configuration.nix`: The main NixOS configuration file, which imports other modules.
        *   `hardware-configuration.nix`: Hardware-specific settings, likely generated by `nixos-generate-config`.
        *   `users.nix`: Defines user accounts and system-wide environment settings.
        *   `gui.nix`: Configures the graphical user interface, including the display manager (SDDM) and desktop environment (KDE Plasma).
        *   `services.nix`: Manages system services like printing, power management, and networking.
    *   `home-manager/`: This directory contains the user-specific configuration.
        *   `home.nix`: The main home-manager configuration for the user "zeph".

## Building and Running

This is a NixOS configuration, so "building" and "running" means applying the configuration to the system.

*   **Applying the NixOS (system) configuration:**
    ```bash
    sudo nixos-rebuild switch --flake .#Overlord
    ```
*   **Applying the home-manager (user) configuration:**
    ```bash
    home-manager switch --flake .#zeph
    ```
    *Note: The user may have an alias `hm` for `home-manager switch`.*

## Development Conventions

*   **Modularity:** The configuration is broken down into logical units (hardware, users, GUI, services), making it easier to manage.
*   **Flakes:** The use of a `flake.nix` file is a modern Nix convention that ensures reproducibility and simplifies dependency management.
*   **Secrets:** There is no explicit secrets management visible in this configuration. For a production setup, secrets should be managed with a tool like `agenix` or `sops-nix`.
*   **Missing Files:**
    *   `nixos/configuration.nix` has a commented-out import for `pkgs.nix`. This file might be intended for custom package definitions.
    *   `home-manager/home.nix` has commented-out imports for modules in a `modules/` directory, which suggests a more granular modular structure that is not yet implemented.
